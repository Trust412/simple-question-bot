export const feelingKeywords = [
  {
    keywords: [
      "happy",
      "joy",
      "excited",
      "cheerful",
      "elated",
      "joyful",
      "delighted",
      "thrilled",
      "ecstatic",
      "blissful",
      "content",
      "pleased",
      "satisfied",
      "upbeat",
      "optimistic",
      "radiant",
      "gleeful",
      "jubilant",
      "merry",
      "sunny",
      "euphoric",
      "exhilarated",
      "overjoyed",
      "blessed",
      "fortunate",
      "lucky",
      "grateful",
      "thankful",
      "appreciative",
      "fulfilled",
    ],
  },
  {
    keywords: [
      "sad",
      "down",
      "unhappy",
      "depressed",
      "blue",
      "grief",
      "gloomy",
      "melancholy",
      "heartbroken",
      "disheartened",
      "despondent",
      "dejected",
      "miserable",
      "sorrowful",
      "tearful",
      "weepy",
      "despair",
      "hopeless",
      "low",
      "downcast",
      "devastated",
      "crushed",
      "defeated",
      "disappointed",
      "discouraged",
      "dismayed",
      "distressed",
      "anguished",
      "tormented",
      "wretched",
    ],
  },
  {
    keywords: [
      "angry",
      "frustrated",
      "annoyed",
      "irritated",
      "mad",
      "rage",
      "furious",
      "enraged",
      "outraged",
      "indignant",
      "resentful",
      "bitter",
      "hostile",
      "aggressive",
      "temper",
      "irate",
      "livid",
      "seething",
      "incensed",
      "provoked",
      "infuriated",
      "exasperated",
      "aggravated",
      "vexed",
      "displeased",
      "disgruntled",
      "upset",
      "offended",
      "insulted",
      "betrayed",
    ],
  },
  {
    keywords: [
      "anxious",
      "worried",
      "nervous",
      "stressed",
      "uneasy",
      "tense",
      "apprehensive",
      "fearful",
      "panicked",
      "overwhelmed",
      "jittery",
      "edgy",
      "restless",
      "agitated",
      "concerned",
      "fretful",
      "troubled",
      "disturbed",
      "perturbed",
      "frightened",
      "scared",
      "terrified",
      "alarmed",
      "dread",
      "insecure",
      "vulnerable",
      "exposed",
      "threatened",
    ],
  },
  {
    keywords: [
      "tired",
      "exhausted",
      "drained",
      "fatigue",
      "weary",
      "burnout",
      "spent",
      "depleted",
      "worn out",
      "drowsy",
      "sleepy",
      "lethargic",
      "listless",
      "sluggish",
      "dull",
      "heavy",
      "run down",
      "overworked",
      "strained",
      "sapped",
      "weakened",
      "debilitated",
      "enervated",
      "prostrate",
    ],
  },
  {
    keywords: [
      "confused",
      "uncertain",
      "unsure",
      "lost",
      "puzzled",
      "bewildered",
      "perplexed",
      "disoriented",
      "discombobulated",
      "muddled",
      "baffled",
      "mystified",
      "disconcerted",
      "mixed up",
      "at sea",
      "in a fog",
      "dazed",
      "stumped",
      "flummoxed",
      "bamboozled",
      "befuddled",
      "confounded",
      "nonplussed",
      "stymied",
      "thwarted",
    ],
  },
  {
    keywords: [
      "hopeful",
      "optimistic",
      "expectant",
      "encouraged",
      "positive",
      "upbeat",
      "confident",
      "assured",
      "buoyant",
      "sanguine",
      "bright",
      "inspired",
      "motivated",
      "determined",
      "resolute",
      "eager",
      "enthusiastic",
      "certain",
      "clear",
      "keen",
      "aspiring",
      "ambitious",
      "driven",
      "focused",
      "purposeful",
      "committed",
      "dedicated",
      "devoted",
      "passionate",
      "zealous",
    ],
  },
  {
    keywords: [
      "grateful",
      "thankful",
      "appreciative",
      "blessed",
      "content",
      "fulfilled",
      "gratified",
      "indebted",
      "obliged",
      "pleased",
      "touched",
      "moved",
      "heartened",
      "cherished",
      "valued",
      "acknowledged",
      "recognized",
      "honored",
      "privileged",
      "favored",
      "beholden",
    ],
  },
  {
    keywords: [
      "peaceful",
      "calm",
      "serene",
      "tranquil",
      "relaxed",
      "centered",
      "balanced",
      "grounded",
      "composed",
      "collected",
      "unruffled",
      "placid",
      "still",
      "quiet",
      "undisturbed",
      "unperturbed",
      "untroubled",
      "at ease",
      "comfortable",
      "secure",
      "harmonious",
      "equanimous",
      "poised",
      "stable",
      "steady",
      "settled",
      "unflappable",
    ],
  },
  {
    keywords: [
      "lonely",
      "isolated",
      "alone",
      "disconnected",
      "separated",
      "detached",
      "alienated",
      "estranged",
      "forsaken",
      "abandoned",
      "deserted",
      "solitary",
      "lonesome",
      "forlorn",
      "desolate",
      "remote",
      "distant",
      "withdrawn",
      "secluded",
      "cut off",
      "excluded",
      "ostracized",
      "rejected",
      "unwanted",
      "unloved",
      "neglected",
      "ignored",
      "forgotten",
    ],
  },
];

export const goalKeywords = [
  {
    keywords: [
      "health",
      "fitness",
      "exercise",
      "workout",
      "weight",
      "diet",
      "nutrition",
      "wellness",
      "wellbeing",
      "physical",
      "body",
      "strength",
      "endurance",
      "flexibility",
      "stamina",
      "vitality",
      "energy",
      "lifestyle",
      "habits",
      "routine",
      "training",
      "conditioning",
    ],
  },
  {
    keywords: [
      "career",
      "job",
      "work",
      "professional",
      "business",
      "promotion",
      "advancement",
      "development",
      "growth",
      "skills",
      "expertise",
      "leadership",
      "management",
      "entrepreneur",
      "startup",
      "company",
      "industry",
      "field",
      "vocation",
      "occupation",
      "profession",
      "trade",
      "craft",
      "specialty",
      "competence",
      "proficiency",
      "mastery",
      "excellence",
      "achievement",
    ],
  },
  {
    keywords: [
      "learning",
      "education",
      "study",
      "skill",
      "knowledge",
      "growth",
      "development",
      "training",
      "course",
      "class",
      "school",
      "university",
      "college",
      "degree",
      "certification",
      "qualification",
      "understanding",
      "wisdom",
      "intelligence",
      "intellect",
      "comprehension",
      "grasp",
      "insight",
      "awareness",
      "consciousness",
      "enlightenment",
      "illumination",
      "realization",
    ],
  },
  {
    keywords: [
      "relationship",
      "family",
      "friend",
      "partner",
      "marriage",
      "connection",
      "social",
      "love",
      "romance",
      "dating",
      "companionship",
      "friendship",
      "community",
      "network",
      "support",
      "bond",
      "attachment",
      "intimacy",
      "trust",
      "communication",
      "tie",
      "link",
      "association",
      "affiliation",
      "alliance",
      "partnership",
      "collaboration",
      "cooperation",
    ],
  },
  {
    keywords: [
      "financial",
      "money",
      "saving",
      "investing",
      "debt",
      "budget",
      "wealth",
      "income",
      "earnings",
      "salary",
      "finance",
      "banking",
      "retirement",
      "security",
      "stability",
      "freedom",
      "independence",
      "assets",
      "resources",
      "prosperity",
      "riches",
      "fortune",
      "affluence",
      "opulence",
      "luxury",
      "abundance",
      "plenty",
      "success",
    ],
  },
  {
    keywords: [
      "creative",
      "art",
      "music",
      "write",
      "paint",
      "create",
      "expression",
      "imagination",
      "inspiration",
      "design",
      "craft",
      "compose",
      "perform",
      "dance",
      "theater",
      "photography",
      "sculpture",
      "poetry",
      "storytelling",
      "innovation",
      "creativity",
      "artistry",
      "craftsmanship",
      "skill",
      "talent",
      "ability",
      "gift",
      "genius",
      "brilliance",
      "mastery",
    ],
  },
  {
    keywords: [
      "home",
      "house",
      "apartment",
      "move",
      "renovation",
      "decorate",
      "living",
      "space",
      "environment",
      "interior",
      "furniture",
      "design",
      "comfort",
      "shelter",
      "residence",
      "dwelling",
      "property",
      "real estate",
      "neighborhood",
      "abode",
      "habitat",
      "quarters",
      "lodging",
      "accommodation",
      "refuge",
      "sanctuary",
    ],
  },
  {
    keywords: [
      "mental",
      "emotional",
      "therapy",
      "healing",
      "self-care",
      "wellness",
      "meditation",
      "mindfulness",
      "psychology",
      "counseling",
      "growth",
      "awareness",
      "insight",
      "understanding",
      "balance",
      "harmony",
      "peace",
      "clarity",
      "focus",
      "presence",
      "attention",
      "concentration",
      "lucidity",
      "sanity",
      "reason",
    ],
  },
  {
    keywords: [
      "travel",
      "adventure",
      "explore",
      "trip",
      "journey",
      "vacation",
      "holiday",
      "destination",
      "experience",
      "discovery",
      "wanderlust",
      "exploration",
      "expedition",
      "excursion",
      "tour",
      "sightseeing",
      "backpacking",
      "road trip",
      "getaway",
      "escape",
      "voyage",
      "outing",
      "jaunt",
      "stroll",
      "ramble",
    ],
  },
  {
    keywords: [
      "purpose",
      "meaning",
      "spiritual",
      "faith",
      "fulfillment",
      "values",
      "beliefs",
      "philosophy",
      "principles",
      "morals",
      "ethics",
      "vision",
      "mission",
      "calling",
      "destiny",
      "path",
      "growth",
      "transformation",
      "enlightenment",
      "significance",
      "importance",
      "value",
      "worth",
      "merit",
      "virtue",
      "goodness",
      "righteousness",
    ],
  },
];

function cleanInput(input: string): string {
  // Remove common words and clean up the input 
  const wordsToRemove = [
    'i', 'am', 'feel', 'feeling', 'was', 'my', 'going to', 'to',
    // 'the', 'a', 'an', 'that', 'this', 'these', 'those', 'it',
    // 'in', 'on', 'at', 'for', 'with', 'about', 'of', 'from',
    // 'or', 'but', 'so', 'because', 'if', 'when', 'while',
    'very', 'really', 'quite', 'too', 'much', 'many', 'some',
    'even', 'still', 'already', 'yet', 'again'
  ];
  
  // Convert to lowercase and split into words
  const words = input.toLowerCase().split(/\s+/);
  
  // Filter out words to remove and empty strings
  const filteredWords = words.filter(word => 
    word.length > 0 && 
    !wordsToRemove.includes(word) &&
    !/^[.,!?;:(){}'"`~@#$%^&*_+=|\\<>/]+$/.test(word)
  );
  
  return filteredWords.join(' ');
}

function conjugatePronounsAndVerbs(text: string): string {
  // Replace first person pronouns with second person
  const pronounMap = {
    'i': 'you',
    'me': 'you',
    'my': 'your',
    'mine': 'yours',
    'myself': 'yourself',
    'am': 'are',
    'was': 'were',
    'have': 'have',
    'has': 'have'
  };

  // Create a regex pattern for all pronouns
  const pronounPattern = new RegExp(
    `\\b(${Object.keys(pronounMap).join('|')})\\b`,
    'gi'
  );

  return text.replace(pronounPattern, match => {
    const lowerMatch = match.toLowerCase();
    return pronounMap[lowerMatch] || match;
  });
}

function processComplexSentences(input: string): string {
  // Split by common sentence separators
  const sentences = input.split(/[,;.!?]+/).filter(s => s.trim().length > 0);
  
  if (sentences.length <= 1) {
    return cleanInput(input);
  }

  // Process each sentence
  const processedSentences = sentences.map((sentence, index) => {
    const trimmed = sentence.trim();
    if (index === 0) {
      // First sentence - just clean it
      return cleanInput(trimmed);
    } else {
      // Subsequent sentences - clean and conjugate pronouns/verbs
      return conjugatePronounsAndVerbs(cleanInput(trimmed));
    }
  });

  return processedSentences.join(', ');
}

// function formatKeywords(keywords: string[]): string[] {
//   if (keywords.length === 0) return [];
//   if (keywords.length === 1) return [keywords[0]];
//   if (keywords.length === 2) return [`${keywords[0]} and ${keywords[1]}`];
  
//   // For more than 2 keywords, use Oxford comma
//   const allButLast = keywords.slice(0, -1);
//   return [...allButLast, 'and ' + keywords[keywords.length - 1]];
// }

export function generateFeelingQuestions(input: string):{ question1: string; question3: string; question4: string; questionCycle: string; questionCycle2: string } {
  const processedInput = processComplexSentences(input);
  // const matchingKeywords = findMatchingKeywords(processedInput, feelingKeywords.flatMap(r => r.keywords));
  // const formattedKeywords = formatKeywords(matchingKeywords);
  console.log('input------------------------>', input);
  // if (matchingKeywords.length === 0) {  
    return {
      question1: `Feel ${processedInput} — what does ${processedInput} feel like?`,
      question3: `Where and how do you feel ${processedInput} now?`,
      question4: `What would it feel like to be ${processedInput}?`,
      questionCycle: `Do you still feel ${processedInput}?`,
      questionCycle2: `If you don't feel ${processedInput} anymore, you can leave the chat. Wish you a successful day! 😁😁😁`,
    };
  // } else {
  //   return {
  //     question1: `Feel ${matchingKeywords} — what does ${matchingKeywords} feel like?`,
  //     question3: `Where and how do you feel ${matchingKeywords} now?`,
  //     question4: `What would it feel like to be ${matchingKeywords}?`,
  //     questionCycle: `Do you still feel ${matchingKeywords}?`,
  //     questionCycle2: `If you don't feel ${matchingKeywords} anymore, you can leave the chat. Wish you a successful day! 😁😁😁`,
  //   };
  // }
}

// Function to generate goal questions
export function generateGoalQuestions(input: string):{ question1: string; question2: string; question4: string; question5: string; questionCycle: string; questionCycle2: string} {
  const processedInput = processComplexSentences(input);
  console.log('processedInput------------------------>', processedInput);
  // const matchingKeywords = findMatchingKeywords(processedInput, feelingKeywords.flatMap(r => r.keywords));
  // console.log('matchingKeywords------------------------>', matchingKeywords);
  console.log('input------------------------>', input);
    return {
      question1: `What would it feel like to ${processedInput}?`,
      question2: `Feel ${processedInput} — what does ${processedInput} feel like?`,
      question4: `Where and how do you feel ${processedInput} now?`,
      question5: `What would it feel like to be ${processedInput}?`,
      questionCycle: `Do you still feel ${processedInput}?`,
      questionCycle2: `If you don't feel ${processedInput} anymore, you can leave the chat. Wish you a successful day! 😁😁😁`,
    };
}

export function checkValidInput(input: string): boolean {
  // Check for empty or whitespace-only input
  if (!input || input.trim().length === 0) {
    return false;
  }

  // Check for minimum length
  if (input.trim().length < 2) {
    return false;
  }

  // Check for maximum length
  if (input.trim().length > 100) {
    return false;
  }

  // Check for repeated characters (e.g., "aaaaa")
  if (/(.)\1{4,}/.test(input)) {
    return false;
  }
  return true;
}

// function findMatchingKeywords(input: string, keywords: string[]):string[] {
//   const lowerInput = input.toLowerCase();
//   // Split by both commas and 'and' to handle both formats
//   const inputWords = lowerInput.split(/[,]|\sand\s/).map(word => word.trim());
  
//   return keywords.filter(keyword => {
//     const lowerKeyword = keyword.toLowerCase();
//     // Check for exact word match in any of the split parts
//     return inputWords.some(word => word === lowerKeyword);
//   });
// }
